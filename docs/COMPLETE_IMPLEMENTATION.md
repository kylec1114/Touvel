# Touvel å®Œæ•´å¯¦æ–½æŒ‡å—

## ğŸ“‹ é …ç›®æ¦‚è¿°

Touvel æ˜¯ä¸€å€‹å®Œæ•´çš„æ—…éŠè¦åŠƒå¹³å°ï¼ŒåŒ…å«å‰å°ç”¨æˆ¶ç•Œé¢ã€å¾Œå°ç®¡ç†ç³»çµ±å’Œæ”¯ä»˜/é è¨‚æµç¨‹ã€‚

## ğŸ—ï¸ å®Œæ•´çš„ç¶²ç«™ç”Ÿæ…‹éˆæ¶æ§‹

### 1. ç”¨æˆ¶ç«¯æ‡‰ç”¨ (Frontend - React)
### 2. å¾Œç«¯ API (Node.js + Express)
### 3. æ•¸æ“šåº« (MySQL)
### 4. ç·©å­˜å±¤ (Redis)
### 5. æ”¯ä»˜ç³»çµ± (Stripe/PayPal)

---

## ğŸ¨ å‰å°åŠŸèƒ½ (User-Facing)

### 1.1 é¦–é  (Home Page)
```
åŠŸèƒ½:
- ç›®çš„åœ°æœç´¢å’Œéæ¿¾
- ç†±é–€æ—…éŠå¥—é¤å±•ç¤º
- ç”¨æˆ¶è©•è«–å’Œè©•åˆ†
- ç‰¹è‰²æ¨è–¦

çµ„ä»¶:
- SearchBar: æœç´¢ç›®çš„åœ°ã€æ—¥æœŸã€é ç®—
- DestinationCard: é¡¯ç¤ºç›®çš„åœ°å¡ç‰‡
- ReviewSection: ç”¨æˆ¶è©•è«–
```

### 1.2 ç”¨æˆ¶èªè­‰ (Auth)
```
åŠŸèƒ½:
- è¨»å†Š (Emailé©—è­‰)
- ç™»å…¥ (JWT Token)
- å¯†ç¢¼é‡ç½®
- ç¤¾äº¤ç™»å…¥ (Google, Facebook)

å¯¦ç¾:
- POST /api/auth/register
- POST /api/auth/login
- POST /api/auth/forgot-password
- POST /api/auth/reset-password
```

### 1.3 æ—…ç¨‹å‰µå»ºå’Œè¦åŠƒ
```
åŠŸèƒ½:
- å»ºç«‹æ–°æ—…ç¨‹
- é¸æ“‡ç›®çš„åœ°å’Œæ—¥æœŸ
- è¨­å®šé ç®—
- é‚€è«‹å”ä½œè€…
- AIè¡Œç¨‹ç”Ÿæˆ

Endpoints:
- GET /api/trips
- POST /api/trips
- GET /api/trips/:id
- PUT /api/trips/:id
- DELETE /api/trips/:id
```

### 1.4 é è¨‚ç³»çµ± (Booking)
```
åŠŸèƒ½:
- é£¯åº—é è¨‚
- æ©Ÿç¥¨é è¨‚
- ç§Ÿè»Šé è¨‚
- æ´»å‹•é è¨‚
- é¤å»³é è¨‚

Booking Flow:
1. é¸æ“‡é …ç›®é¡å‹
2. æœç´¢å¯ç”¨é¸é …
3. é¸æ“‡æ—¥æœŸå’Œè©³æƒ…
4. æª¢æŸ¥åƒ¹æ ¼
5. é€²è¡Œæ”¯ä»˜
6. ç¢ºèªé è¨‚

Endpoints:
- GET /api/bookings
- POST /api/bookings
- GET /api/bookings/:id
- PUT /api/bookings/:id
- DELETE /api/bookings/:id (å–æ¶ˆ)
- GET /api/bookings/:id/confirmation
```

### 1.5 æ”¯ä»˜æµç¨‹ (Payment)
```
æ”¯æŒçš„æ”¯ä»˜æ–¹å¼:
- ä¿¡ç”¨å¡/å€Ÿè¨˜å¡ (Stripe)
- PayPal
- éŠ€è¡Œè½‰å¸³
- æ•¸å­—éŒ¢åŒ…

Endpoints:
- POST /api/payments/process
- GET /api/payments/:id
- POST /api/payments/:id/refund
- GET /api/payments/history

éŒ¯èª¤è™•ç†:
- æ”¯ä»˜å¤±æ•—é‡è©¦
- é€€æ¬¾è™•ç†
- ç™¼ç¥¨ç”Ÿæˆ
```

### 1.6 ç”¨æˆ¶å€‹äººè³‡æ–™
```
åŠŸèƒ½:
- ç·¨è¼¯å€‹äººä¿¡æ¯
- ç®¡ç†é è¨‚
- æŸ¥çœ‹äº¤æ˜“è¨˜éŒ„
- è¨­å®šåå¥½
- èªè¨€é¸æ“‡
- è²¨å¹£é¸æ“‡

Endpoints:
- GET /api/users/profile
- PUT /api/users/profile
- GET /api/users/bookings
- GET /api/users/payments
```

---

## ğŸ”§ å¾Œå°ç®¡ç†ç³»çµ± (Admin Dashboard)

### 2.1 ç®¡ç†å“¡èªè­‰
```
åƒ…é™ç®¡ç†å“¡ç”¨æˆ¶è¨ªå•
- ç®¡ç†å“¡ç™»å…¥
- æ¬Šé™é©—è­‰ (Role-based)
- å¯©è¨ˆæ—¥èªŒè¨˜éŒ„
```

### 2.2 ç”¨æˆ¶ç®¡ç†
```
Endpoints:
- GET /api/admin/users
- GET /api/admin/users/:id
- PUT /api/admin/users/:id (æ›´æ–°)
- DELETE /api/admin/users/:id (æš«åœ)
- POST /api/admin/users/:id/suspend
- POST /api/admin/users/:id/restore

åŠŸèƒ½:
- æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ¶
- æœç´¢å’Œéæ¿¾
- ç·¨è¼¯ç”¨æˆ¶ä¿¡æ¯
- æš«åœ/æ¢å¾©ç”¨æˆ¶
- æŸ¥çœ‹ç”¨æˆ¶æ´»å‹•
```

### 2.3 æ—…ç¨‹ç®¡ç†
```
Endpoints:
- GET /api/admin/trips
- GET /api/admin/trips/:id
- PUT /api/admin/trips/:id
- DELETE /api/admin/trips/:id

åŠŸèƒ½:
- æŸ¥çœ‹æ‰€æœ‰æ—…ç¨‹
- ç·¨è¼¯æ—…ç¨‹
- åˆªé™¤ä¸ç•¶å…§å®¹
- çµ±è¨ˆåˆ†æ
```

### 2.4 é è¨‚ç®¡ç†
```
Endpoints:
- GET /api/admin/bookings
- GET /api/admin/bookings/:id
- PUT /api/admin/bookings/:id
- POST /api/admin/bookings/:id/refund

åŠŸèƒ½:
- æŸ¥çœ‹æ‰€æœ‰é è¨‚
- è™•ç†é€€æ¬¾
- æŸ¥çœ‹é è¨‚è©³æƒ…
- å°å‡ºå ±å‘Š
```

### 2.5 ä»˜æ¬¾/è²¡å‹™ç®¡ç†
```
Endpoints:
- GET /api/admin/payments
- GET /api/admin/payments/summary
- GET /api/admin/payments/refunds
- POST /api/admin/payments/:id/approve-refund

åŠŸèƒ½:
- æŸ¥çœ‹æ‰€æœ‰ä»˜æ¬¾
- è²¡å‹™å ±è¡¨
- é€€æ¬¾å¯©æ‰¹
- æ”¶å…¥çµ±è¨ˆ
```

### 2.6 ç›®çš„åœ°ç®¡ç†
```
Endpoints:
- GET /api/admin/destinations
- POST /api/admin/destinations
- PUT /api/admin/destinations/:id
- DELETE /api/admin/destinations/:id
- POST /api/admin/destinations/:id/featured

åŠŸèƒ½:
- æ·»åŠ /ç·¨è¼¯ç›®çš„åœ°
- ä¸Šå‚³åœ–ç‰‡
- è¨­å®šç‰¹è‰²ç›®çš„åœ°
- ç®¡ç†è©•è«–
```

### 2.7 ä¿ƒéŠ·ä»£ç¢¼
```
Endpoints:
- GET /api/admin/promo-codes
- POST /api/admin/promo-codes
- PUT /api/admin/promo-codes/:id
- DELETE /api/admin/promo-codes/:id

åŠŸèƒ½:
- å»ºç«‹ä¿ƒéŠ·ä»£ç¢¼
- è¨­å®šæŠ˜æ‰£
- é™åˆ¶ä½¿ç”¨æ¬¡æ•¸
- è¨­å®šæœ‰æ•ˆæœŸ
```

### 2.8 ç³»çµ±è¨­ç½®
```
åŠŸèƒ½:
- ç¶²ç«™è¨­ç½®
- æ”¯ä»˜è¨­ç½®
- éƒµä»¶é…ç½®
- æ—¥èªŒæŸ¥çœ‹
- æ•¸æ“šå‚™ä»½
```

---

## ğŸ’³ é è¨‚ç³»çµ±è©³ç´°æµç¨‹

### 3.1 é è¨‚å‰µå»º
```javascript
æ­¥é©Ÿ 1: é¸æ“‡é …ç›®é¡å‹
  - hotel, flight, car_rental, activity, restaurant

æ­¥é©Ÿ 2: å¡«å¯«é è¨‚è©³æƒ…
  - æ—¥æœŸ (check_in, check_out)
  - æ•¸é‡
  - ç‰¹æ®Šè¦æ±‚

æ­¥é©Ÿ 3: é©—è­‰å¯ç”¨æ€§
  - æª¢æŸ¥åº«å­˜
  - æª¢æŸ¥æ—¥æœŸè¡çª

æ­¥é©Ÿ 4: è¨ˆç®—åƒ¹æ ¼
  - åŸºæœ¬åƒ¹æ ¼
  - ç¨…å‹™
  - æœå‹™è²»
  - æ‡‰ç”¨ä¿ƒéŠ·ä»£ç¢¼

æ­¥é©Ÿ 5: å‰µå»ºé è¨‚è¨˜éŒ„
  - ç”Ÿæˆç¢ºèªè™Ÿ
  - ä¿å­˜åˆ°æ•¸æ“šåº«
  - è¿”å›é è¨‚ä¿¡æ¯
```

### 3.2 æ”¯ä»˜è™•ç†
```javascript
æ­¥é©Ÿ 1: é©—è­‰æ”¯ä»˜ä¿¡æ¯
  - æª¢æŸ¥é‡‘é¡
  - é©—è­‰ç”¨æˆ¶

æ­¥é©Ÿ 2: åˆå§‹åŒ–æ”¯ä»˜ç¶²é—œ
  - Stripe (ä¿¡ç”¨å¡)
  - PayPal (PayPalè³¬æˆ¶)
  - éŠ€è¡Œ (éŠ€è¡Œè½‰å¸³)

æ­¥é©Ÿ 3: è™•ç†æ”¯ä»˜
  - ç™¼é€åˆ°æ”¯ä»˜è™•ç†å•†
  - ç­‰å¾…éŸ¿æ‡‰
  - è™•ç†å›èª¿

æ­¥é©Ÿ 4: æ›´æ–°é è¨‚ç‹€æ…‹
  - è¨­ç½®ç‚º 'confirmed'
  - ç™¼é€ç¢ºèªéƒµä»¶
  - ä¿å­˜äº¤æ˜“ID

æ­¥é©Ÿ 5: ç”Ÿæˆæ”¶æ“š
  - å‰µå»ºPDF
  - ç™¼é€çµ¦ç”¨æˆ¶
  - ä¿å­˜åˆ°æ•¸æ“šåº«
```

### 3.3 é è¨‚ç¢ºèª
```javascript
é€šçŸ¥:
- ç™¼é€ç¢ºèªéƒµä»¶
- æ¨é€é€šçŸ¥
- åœ¨æ‡‰ç”¨å…§é¡¯ç¤º

ç¢ºèªè©³æƒ…:
- ç¢ºèªè™Ÿ
- é è¨‚è©³æƒ…
- æ”¯ä»˜è©³æƒ…
- å–æ¶ˆæ”¿ç­–
```

### 3.4 å–æ¶ˆå’Œé€€æ¬¾
```javascript
å–æ¶ˆæµç¨‹:
1. æª¢æŸ¥å–æ¶ˆæ”¿ç­–
2. è¨ˆç®—é€€æ¬¾é‡‘é¡
3. å‰µå»ºé€€æ¬¾è«‹æ±‚
4. è™•ç†é€€æ¬¾
5. æ›´æ–°é è¨‚ç‹€æ…‹ç‚º 'cancelled'
6. ç™¼é€é€€æ¬¾ç¢ºèª

Endpoints:
- DELETE /api/bookings/:id (ç”¨æˆ¶å–æ¶ˆ)
- POST /api/admin/bookings/:id/refund (ç®¡ç†å“¡å¯©æ‰¹)
```

---

## ğŸ›¡ï¸ å®‰å…¨æ€§å’Œé˜²æ­¢Bugçš„æªæ–½

### 4.1 èº«ä»½é©—è­‰å’Œæˆæ¬Š
```javascript
- JWT Tokené©—è­‰
- åˆ·æ–°Tokenæ©Ÿåˆ¶
- æ¬Šé™æª¢æŸ¥ä¸­é–“ä»¶
- è§’è‰²åŸºç¤è¨ªå•æ§åˆ¶ (RBAC)
```

### 4.2 æ•¸æ“šé©—è­‰
```javascript
- è¼¸å…¥é©—è­‰ (å‰ç«¯ + å¾Œç«¯)
- SQLæ³¨å…¥é˜²è­·
- XSSé˜²è­·
- CSRFé˜²è­·
- æ•¸æ“šæ¸…ç†
```

### 4.3 éŒ¯èª¤è™•ç†
```javascript
- Try-catchå¡Š
- éŒ¯èª¤æ—¥èªŒè¨˜éŒ„
- ç”¨æˆ¶å‹å¥½çš„éŒ¯èª¤æ¶ˆæ¯
- éŒ¯èª¤æ¢å¾©æ©Ÿåˆ¶
```

### 4.4 æ•¸æ“šåº«ä¸€è‡´æ€§
```javascript
- äº‹å‹™ç®¡ç†
- å¤–éµç´„æŸ
- å”¯ä¸€ç´„æŸ
- æª¢æŸ¥ç´„æŸ
```

### 4.5 APIå®‰å…¨
```javascript
- é€Ÿç‡é™åˆ¶ (100 req/15min)
- CORSé…ç½®
- HTTPSåª
- APIé‡‘é‘°é©—è­‰
```

---

## ğŸ“Š æ¸¬è©¦å’Œè³ªé‡ä¿è­‰

### 5.1 å–®å…ƒæ¸¬è©¦
```javascript
- Jestç”¨æ–¼å¾Œç«¯
- React Testing Libraryç”¨æ–¼å‰ç«¯
- è‡³å°‘80%ä»£ç¢¼è¦†è“‹ç‡
```

### 5.2 é›†æˆæ¸¬è©¦
```javascript
- APIç«¯é»æ¸¬è©¦
- æ•¸æ“šåº«æ“ä½œæ¸¬è©¦
- æ”¯ä»˜æµç¨‹æ¨¡æ“¬
```

### 5.3 E2Eæ¸¬è©¦
```javascript
- Cypress/Selenium
- ç”¨æˆ¶æµç¨‹æ¨¡æ“¬
- é è¨‚ç³»çµ±å®Œæ•´æµç¨‹
```

---

## ğŸš€ éƒ¨ç½²

### 6.1 Dockerå®¹å™¨åŒ–
```bash
docker-compose up
```

### 6.2 ç”Ÿç”¢ç’°å¢ƒ
```
- å‰ç«¯: Vercel/Netlify
- å¾Œç«¯: AWS EC2/Heroku
- æ•¸æ“šåº«: AWS RDS
- ç·©å­˜: Redis Cloud
```

---

## ğŸ“ ç¸½çµ

æœ¬å¯¦æ–½æŒ‡å—æ¶µè“‹äº†Touvelå¹³å°çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½:
âœ… å®Œæ•´çš„ç”¨æˆ¶å‰å°
âœ… åŠŸèƒ½å®Œå–„çš„å¾Œå°ç®¡ç†
âœ… è©³ç´°çš„é è¨‚ç³»çµ±
âœ… å®‰å…¨çš„æ”¯ä»˜é›†æˆ
âœ… é˜²æ­¢å¸¸è¦‹Bugçš„æªæ–½
âœ… å…¨é¢çš„æ¸¬è©¦ç­–ç•¥

éµå¾ªæœ¬æŒ‡å—å¯ç¢ºä¿æ§‹å»ºä¸€å€‹ç©©å®šã€å®‰å…¨å’ŒåŠŸèƒ½å®Œæ•´çš„æ—…éŠè¦åŠƒå¹³å°ã€‚
